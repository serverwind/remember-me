(()=>{"use strict";function e(e,t,n,a,r,o){var c={id:e,task:t,priority:n,date:r,projID:o};a?localStorage.setItem("task".concat(e),JSON.stringify(c)):localStorage.removeItem("task".concat(e))}var t=document.getElementById("new-task-input"),n=document.getElementById("date");document.getElementById("new-task-add").addEventListener("click",(function(){!function(t,n,a){""===t?console.log("Input empty"):function(t,n,a){var r=Math.floor(999*Math.random()),o=document.querySelector(".chosen-proj").getAttribute("proj-id");v.push({ID:r,task:t,priority:n,date:a}),h(r,t,n,a),e(r,t,n,!0,a,o)}(t,n,a)}(t.value,priority.value,n.value)}));const a=n;var r=document.getElementById("date-picker"),o=document.getElementById("date-selector"),c=document.getElementById("date-today"),d=document.getElementById("date-tomorrow");function i(e){var t=new Date,n=t.toISOString().substring(0,10);"tomorrow"===e&&(t=new Date(+new Date+864e5)),console.log(e),n=t.toISOString().substring(0,10),a.value=n}function s(){var t=this.parentElement.getAttribute("task-id"),n=v.length;for(this.parentElement.classList.add("removed");n--;)t==v[n].ID&&v.splice(n,1);return e(t,0,!1)}r.addEventListener("click",(function(){r.classList.add("hidden"),o.classList.remove("hidden")})),c.addEventListener("click",(function(){i("today")})),d.addEventListener("click",(function(){i("tomorrow")})),document.querySelectorAll(".remove-task").forEach((function(e){e.addEventListener("click",s)}));const l=function(e,t,n){var a={id:e,proj:t};n?localStorage.setItem("proj".concat(e),JSON.stringify(a)):localStorage.removeItem("proj".concat(e))};function m(){var e=document.querySelector(".default-proj > span"),t=this.parentElement.firstChild.getAttribute("proj-id"),n=v.length;for(this.parentElement.remove(),e.classList.add("chosen-proj");n--;)t==v[n].ID&&v.splice(n,1);l(t,0,!1)}document.querySelectorAll(".remove-proj").forEach((function(e){e.addEventListener("click",m)}));var u=document.getElementById("task-list"),p=document.getElementById("projects"),v=[];function E(){var e=[];u.innerHTML="";var t=/\btask(\d+)\b/;Object.keys(localStorage).forEach((function(n){if(t.test(n)){var a=JSON.parse(localStorage.getItem(n));e.push(a)}}));for(var n=0;n<e.length;n++){var a=e[n];a.projID==document.querySelector(".chosen-proj").getAttribute("proj-id")&&h(a.id,a.task,a.priority,a.date)}}function h(e,t,n,a){var r=document.createElement("li"),o=document.createElement("span");o.innerHTML=t,o.classList.add("single-task"),r.setAttribute("task-id",e);var c=document.createElement("span");c.classList.add("task-priority"),c.innerHTML="Priority: ".concat(n,".");var d=document.createElement("span");d.classList.add("task-date"),d.innerHTML="Date: ".concat(a);var i=document.createElement("span");i.classList.add("material-icons"),i.innerHTML="motion_photos_on";var l=document.createElement("button");return l.classList.add("remove-task"),l.addEventListener("click",s),l.appendChild(i),r.appendChild(l),r.appendChild(o),r.appendChild(c),r.appendChild(d),u.appendChild(r),console.log("dom created")}function f(e,t){var n=document.createElement("li"),a=document.createElement("span"),r=document.createElement("span");a.setAttribute("proj-id",e),a.innerHTML=t,r.classList.add("material-icons"),r.innerHTML="close";var o=document.createElement("button");o.classList.add("remove-proj"),o.addEventListener("click",m),o.appendChild(r),n.appendChild(a),n.appendChild(o),p.appendChild(n)}function L(){document.querySelector(".chosen-proj").classList.remove("chosen-proj"),this.classList.add("chosen-proj"),E()}!function(){var e=/\bproj(\d+)\b/;v=[],Object.keys(localStorage).forEach((function(t){if(e.test(t)){var n=JSON.parse(localStorage.getItem(t));v.push(n)}}));for(var t=0;t<v.length;t++){var n=v[t];f(n.id,n.proj)}}(),E(),document.querySelectorAll("#projects > li > span").forEach((function(e){e.addEventListener("click",L)}));var g=document.getElementById("new-proj"),k=document.getElementById("projects");function y(){var e=Math.floor(999*Math.random()),t=document.querySelector(".proj-name"),n=t.value,a=this.parentElement,r=document.createElement("span");return r.innerHTML=n,r.setAttribute("proj-id",e),r.addEventListener("click",L),a.prepend(r),this.innerHTML="x",this.removeEventListener("click",y),this.addEventListener("click",m),t.remove(),l(e,n,!0)}g.addEventListener("click",(function(){var e=document.createElement("li"),t=document.createElement("input"),n=document.createElement("button"),a=document.createElement("span");t.value="New project",t.classList.add("proj-name"),n.classList.add("save-proj"),n.addEventListener("click",y),a.classList.add("material-icons"),a.innerHTML="done",n.append(a),e.append(t,n),k.appendChild(e)}))})();